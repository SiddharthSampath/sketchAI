<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
<!-- font awesome -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
{% load static %}
    <link rel="stylesheet" href="{% static 'drawapp/css/styles.css' %}">
    <script type="text/javascript" src="{% static 'drawapp/js/canvas.js' %}"></script>
    <!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="../excanvas.js"></script><![endif]-->
<!--<script src="canvas.js"></script>
<link rel="stylesheet" href="styles.css">-->

</head>

<body>
    {% include 'drawapp/includes/navbar.html' %}
    <!--<p>Image to use:</p>
    <img src="dog.jpg" width="32" height="32">-->
    <button id="start" class="btn" onclick="draw()">Start Drawing!</button>
    <div class="container"id="wrapper">

        <canvas id="canvas2" width=900 height=400></canvas>
        <canvas id="canvas" width=900 height=400></canvas>
    </div>
    <button type="button" class="btn" id="clear" value ="clear" onclick="clearcanvas()"> clear</button>

    <!--<button type="button" class="btn" id="clear" value ="clear" onclick="window.location.reload()"> clear</button>
    --><a id="downloadLnk" download="test.jpg"></a>

    <button class="btn" id="pen">Draw</button>
    <button class="btn" id="eraser">Eraser</button>


    {% load static %}
    <script type="text/javascript">
    // drawing on canvas
    function draw() {
      var canvas = document.getElementById('canvas2');
      var image = new Image();
      image.src = "{% static 'drawapp/images/dog.jpg' %}";
    //image.width="32";
    //image.height="32";
      image.onload = function () {
        var cxt = canvas.getContext('2d');
        //cxt.globalCompositeOperation = 'saturation';
        cxt.globalAlpha = 0.4;
        cxt.drawImage(image,
             canvas.width / 2 - image.width / 2,
             canvas.height / 2 - image.height / 2
        );};
      }
      //downloading image
      var canvas = document.getElementById('canvas')
      var link = document.createElement('a');
        link.innerHTML = 'download image';
        link.classList.add("btn")
        link.setAttribute("id", "downloadbtn")
        link.addEventListener('click', function(ev) {
        link.href = canvas.toDataURL();
        link.download = "mypainting.png";
    }, false);
    document.body.appendChild(link);

    function clearcanvas(){

      const context = canvas.getContext('2d');

      context.clearRect(0, 0, canvas.width, canvas.height);
    }

  </script>
</body>
</html>
